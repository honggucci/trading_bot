{
  "_description": "MODE 78: Macro Filter + Micro SL (1W Setup + 1H Invalidation)",
  "_base": "MODE 77",
  "_note": "1W Fib는 진입 필터(Setup), SL은 1H swing 구조 기반 (스케일 정합)",
  "_experiment": "2R이 실제로 도달 가능하도록 R을 micro TF 기준으로 계산",
  "enable_short": false,
  "stoch_rsi_oversold": 20.0,
  "stoch_rsi_overbought": 80.0,
  "stoch_rsi_period": 14,
  "stoch_signal_mode": "state",
  "atr_tf_for_risk": "15m",
  "atr_period": 38,
  "_comment_fib_sl": "=== Fib SL OFF - Micro SL 사용 ===",
  "use_fib_based_sl": false,
  "fib_sl_fallback_mult": 1.5,
  "fib_sl_buffer_ratio": 0.15,
  "_comment_micro_sl": "=== MODE78: Micro SL (1H swing 기반, 2ATR cap) ===",
  "use_micro_sl": true,
  "micro_sl_tf": "1h",
  "micro_sl_source": "swing",
  "micro_sl_buffer_mode": "atr",
  "micro_sl_buffer_tf": "1h",
  "micro_sl_buffer_mult": 0.5,
  "micro_sl_max_atr_dist": 2.0,
  "_comment_tp": "=== ATR TP + R-based partial ===",
  "tp_mode": "atr",
  "tp_atr_mults": [
    2.0,
    3.0,
    4.0
  ],
  "r_tp1_mult": 1.0,
  "r_tp1_pct": 0.5,
  "r_tp2_mult": 2.0,
  "r_tp2_pct": 0.25,
  "r_runner_pct": 0.25,
  "use_be_stop_on_tp1": true,
  "fib_tp_candidates": 4,
  "min_rr_net": 2.0,
  "rr_tp_ref": "tp1",
  "_comment_sl": "=== SL = 1H swing_low - (ATR_1H × 0.5) ===",
  "sl_atr_mult": 1.0,
  "_comment_rr_tp_gate": "=== RR 2.0 TP Gate: swing_high/low 기준 ===",
  "use_rr_min_tp_gate": true,
  "rr_min_tp_ratio": 2.0,
  "_comment_max_risk_filter": "=== MODE78: 리스크 필터 (2%/6ATR 15m기준, ~3ATR 1H기준) ===",
  "use_max_risk_filter": true,
  "max_risk_pct": 2.5,
  "max_risk_atr_mult": 6.0,
  "_comment_tp_min_partial": "=== MODE78: 2R 도달 시 40% 강제 청산 ===",
  "use_tp_min_partial": true,
  "tp_min_partial_pct": 0.4,
  "tp_min_r_mult": 2.0,
  "_comment_exit_priority": "=== MODE78: 2R 전 조기청산 제한 ===",
  "use_exit_priority_2r": true,
  "regime_long_uptrend": true,
  "regime_long_range": false,
  "regime_long_downtrend": false,
  "use_regime_filter": false,
  "use_drift_filter": false,
  "use_rr_gate": false,
  "use_prob_gate": false,
  "prob_gate_temp_mode": "vol",
  "prob_gate_p_shrink": 0.6,
  "prob_gate_thr_long": 0.5,
  "prob_gate_thr_short": 0.65,
  "use_hilbert_filter": false,
  "hilbert_block_long_on_bear": false,
  "use_trend_filter_1h": false,
  "use_trend_filter_4h": false,
  "_comment_early_exit": "=== Early Exit (2R priority로 제한됨) ===",
  "use_early_exit": true,
  "early_exit_duration": "9999h",
  "early_exit_mfe_mult": 0.3,
  "use_gate_flip_exit": false,
  "use_opposite_div_early": false,
  "use_5m_div_exit": true,
  "use_5m_div_loss_cut": false,
  "use_15m_div_exit": false,
  "_comment_winner_protect": "=== 승자 보호 ===",
  "use_winner_protect": true,
  "winner_protect_r": 1.0,
  "gateflip_confirm_bars": 3,
  "early_exit_mode": "exit",
  "_comment_div": "=== Divergence Type: Regular + Hidden ===",
  "use_regular_div_long": true,
  "use_hidden_div_long": true,
  "_comment_trailing": "=== Trailing Stop (Runner 청산용) ===",
  "use_trailing_stop": true,
  "trailing_activation_atr": 2.0,
  "trailing_distance_atr": 1.0,
  "use_5m_div_trailing": false,
  "use_5m_div_partial_trailing": true,
  "prob_gate_use_drift_thr": false,
  "use_feature_store": false,
  "use_risk_fixed_sizing": true,
  "risk_usd_per_trade": 25.0,
  "max_notional_usd": 5000.0,
  "min_sl_distance_atr_mult": 0.1,
  "fib_space": "linear",
  "fib_anchor_low": 3120.0,
  "fib_anchor_high": 143360.0,
  "fib_tolerance_mode": "fib_zone",
  "fib_tolerance_coverage_ratio": 0.5,
  "atr_tf_for_fib": "15m",
  "use_rr_limit_entry": true,
  "rr_limit_target": 2.0,
  "rr_limit_ttl": "6h",
  "rr_limit_max_atr_dist": 999.0,
  "rr_limit_price_ref": "close",
  "rr_limit_fill_on": "low",
  "entry_offset_ratio": 0.3,
  "rr_entry_mode": "offset_ratio",
  "use_macro_fib": false,
  "use_dynamic_fib": true,
  "dynamic_fib_tf": "1w",
  "dynamic_fib_space": "linear",
  "dynamic_fib_mode": "zigzag",
  "dynfib_lookback_bars": 100,
  "dynfib_reversal_atr_mult": 1.5,
  "dynfib_min_swing_atr_mult": 1.5,
  "dynfib_confluence_with_macro": false,
  "dynfib_confluence_tol": 0.005,
  "dynfib_use_as": "both",
  "_comment_dynfib_ratios": "=== -2 ~ 2 확장 (Setup Zone용) ===",
  "dynfib_ratios": [
    -2.0,
    -1.618,
    -1.0,
    -0.618,
    -0.382,
    -0.236,
    0,
    0.236,
    0.382,
    0.5,
    0.618,
    0.786,
    1.0,
    1.272,
    1.618,
    2.0
  ],
  "_comment_volatility_filter": "=== 저변동성 필터 ON: 0~0.236 구간이 0.5% 미만이면 매매 금지 ===",
  "use_min_fib_gap_filter": true,
  "min_fib_gap_pct": 0.5,
  "use_fib_entry_filter": false
}